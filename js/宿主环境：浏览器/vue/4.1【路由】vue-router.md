
[官方文档](https://router.vuejs.org/zh/installation.html)

# vue-router

Vue Router是Vue.js的官方路由器。它与Vue.js核心深度集成，使用Vue.js构建单页应用程序变得轻而易举。

功能包括：

- 嵌套路由/视图映射
- 模块化，基于组件的路由器配置
- 路线参数，查询，通配符
- 查看由Vue.js过渡系统提供支持的过渡效果
- 细粒度的导航控制
- 与自动活动CSS类的链接
- HTML5历史模式或哈希模式，在IE9中具有自动回退功能
- 可自定义的滚动行为


# 安装

```
npm install vue-router
```

如果在一个模块化工程中使用它，必须要通过 Vue.use() 明确地安装路由功能：

```
	import Vue from 'vue'
	import VueRouter from 'vue-router'

	Vue.use(VueRouter)
```
如果使用全局的 script 标签，则无须如此



# 路由声明

路由由 视图 和 路由规则组成

使用路由，主要靠两个标签

`<router-link>` 链接
`<router-view>` 显示在哪里


`<router-view ></router-view>` 表示一个路由视图，路由中的组件会显示在这个地方，相当于是个占位

```
const User = {
  template: '<div>User</div>'
}

const router = new VueRouter({
  routes: [
    // 动态路径参数 以冒号开头
    { path: '/user', component: User }
  ]
})
```



# 使用

两种方式

## 1.声明式（在html中）

`<router-link>` 组件支持用户在具有路由功能的应用中 (点击) 导航

通过 to 属性指定目标地址，默认渲染成带有正确链接的 <a> 标签，可以通过配置 tag 属性生成别的标签.。另外，当目标路由成功激活时，链接元素自动设置一个表示激活的 CSS 类名。
```
<router-link :to="...">
```

## 2.编程式（在js中）

router 的实例方法:

• router.push(location, onComplete?, onAbort?)			# 向 history 栈添加一个新的记录，所以，当用户点击浏览器后退按钮时，则回到之前的 URL

• router.replace(location, onComplete?, onAbort?)		# 替换掉当前的 history 记录

• router.go(n)			# 在 history 记录中向前或者后退多少步，类似 window.history.go(n)

你也许注意到 router.push、 router.replace 和 router.go 跟 window.history.pushState、 window.history.replaceState 和 window.history.go好像， 实际上它们确实是效仿 window.history API 的。

### router.push

注意：在 Vue 实例内部，你可以通过 $router 访问路由实例。因此你可以调用 this.$router.push

该方法的参数可以是一个字符串路径，或者一个描述地址的对象。例如：
```
// 字符串
router.push('home')

// 对象
router.push({ path: 'home' })

// 命名的路由
router.push({ name: 'user', params: { userId: 123 }})

// 带查询参数，变成 /register?plan=private
router.push({ path: 'register', query: { plan: 'private' }})
```

> 注意：如果提供了 path，params 会被忽略，上述例子中的 query 并不属于这种情况。取而代之的是下面例子的做法，你需要提供路由的 name 或手写完整的带有参数的 path：
```
const userId = 123
router.push({ name: 'user', params: { userId }}) // -> /user/123
router.push({ path: `/user/${userId}` }) // -> /user/123
// 这里的 params 不生效
router.push({ path: '/user', params: { userId }}) // -> /user
```
同样的规则也适用于 router-link 组件的 to 属性。

> 注意： 如果目的地和当前路由相同，只有参数发生了改变 (比如从一个用户资料到另一个 /users/1 -> /users/2)，你需要使用 beforeRouteUpdate 来响应这个变化 (比如抓取用户信息)。


### router.replace

跟 router.push 很像，唯一的不同就是，它不会向 history 添加新记录，而是跟它的方法名一样 —— 替换掉当前的 history 记录。

```
<router-link :to="..." replace>
```

```
router.replace(...)
```


### router.go

这个方法的参数是一个整数，意思是在 history 记录中向前或者后退多少步，类似 window.history.go(n)。

```
// 在浏览器记录中前进一步，等同于 history.forward()
router.go(1)

// 后退一步记录，等同于 history.back()
router.go(-1)

// 前进 3 步记录
router.go(3)

// 如果 history 记录不够用，那就默默地失败呗
router.go(-100)
router.go(100)
```




# 定义路由时 重定向和别名

## 重定向：

重定向(Redirect)就是通过各种方法将各种网络请求重新定个方向转到其它位置,用于网站调整或网页被移到一个新地址,它也是通过 routes 配置来完成，

下面例子是从 /a 重定向到 /b：

```
	var router = new VueRouter({
	  routes: [
	    { path: '/a', redirect: '/b' }
	  ]
	})
```

## 别名:

/a 的别名是 /b，意味着，当用户访问 /b 时，URL 会保持为 /b，但是路由匹配则为 /a，就像用户访问 /a 一样。

简单的说就是给 /a 起了一个外号叫做 /b ,但是本质上还是 /a

上面对应的路由配置为：

```
	var router = new VueRouter({
	  routes: [
	    { path: '/a', component: A, alias: '/b' }
	  ]
	})
```

『别名』的功能让你可以自由地将 UI 结构映射到任意的 URL，而不是受限于配置的嵌套路由结构。


# 页面重定向

```
$router.replace({ path: '/' })
```
# 返回上一页

```
	goBack () {
		window.history.length > 1 ? this.$router.go(-1) : this.$router.push('/');
	}
```


# vue-router 如何在新窗口打开页面

1. <router-link>标签实现新窗口打开：
```
<router-link target="_blank" :to="{path:'/home',query:{id:'1'}}">新页面打开home页</router-link>
```

2、编程式导航：
```
seeShare(){
     let routeUrl = this.$router.resolve({
          path: "/share",
          query: {id:96}
     });
     window.open(routeUrl .href, '_blank');
}

```